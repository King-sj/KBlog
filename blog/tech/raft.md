# 分布式选举算法
Raft是一种用于分布式系统的共识算法，旨在解决分布式系统中的一致性问题。以下是关于Raft的详细介绍：

### 背景与目标
- **背景**：在分布式系统中，多个节点需要协同工作以达成一致的状态。Raft算法的设计目标是提供一种易于理解和实现的一致性算法，以替代复杂的Paxos算法。
- **目标**：Raft的主要目标是在分布式系统中实现强一致性，确保所有节点对系统状态达成一致，即使在节点故障、网络分区等情况下也能保持一致性。

### 算法角色与状态
- **角色**：Raft将节点分为三种角色：领导者（Leader）、跟随者（Follower）和候选人（Candidate）。领导者负责处理客户端请求、复制日志和管理集群状态；跟随者接收并复制领导者的日志；候选人是在选举过程中出现的临时角色。
- **状态转换**：节点初始状态为跟随者，在一定时间内未收到领导者的心跳消息时，会转变为候选人并发起选举。选举成功后成为领导者，领导者定期发送心跳消息以维持其地位。

### 核心算法
- **选举过程**：候选人向其他节点发送投票请求，节点根据一定规则决定是否投票。获得多数票的候选人成为领导者。选举过程中使用随机化的选举超时时间来避免选票分散。
- **日志复制**：领导者将客户端请求封装成日志条目，并发地发送给其他节点。节点接收并持久化日志条目，当多数节点确认后，日志被提交并应用到状态机。
- **安全性保证**：Raft通过限制领导者的选举条件和日志提交规则来确保安全性。只有拥有最新已提交日志的节点才能成为领导者，并且领导者只能提交当前任期内的日志。

### 优化与扩展
- **日志压缩**：为了避免日志无限增长，Raft采用快照机制来压缩日志。节点定期创建快照，丢弃之前的日志。
- **成员变更**：Raft支持动态添加或删除节点。变更过程通过联合共识机制确保安全性。

### 应用场景
- **分布式存储系统**：Raft用于确保数据在多个节点上的一致性，如TiKV和etcd。
- **分布式计算系统**：Raft用于协调分布式任务的执行，确保所有节点对任务状态达成一致。

### 总结
Raft算法通过简单的角色划分和明确的状态转换，提供了一种易于理解和实现的分布式一致性解决方案。它在分布式系统中广泛应用，特别是在需要强一致性的场景中。


## 参考
- https://zhuanlan.zhihu.com/p/32052223
